---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: postgresclusters.postgres-operator.crunchydata.com
spec:
  group: postgres-operator.crunchydata.com
  names:
    kind: PostgresCluster
    listKind: PostgresClusterList
    plural: postgresclusters
    singular: postgrescluster
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: PostgresCluster is the Schema for the postgresclusters API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: PostgresClusterSpec defines the desired state of PostgresCluster
            properties:
              backups:
                description: PostgreSQL backup configuration
                properties:
                  pgbackrest:
                    description: pgBackRest archive configuration
                    properties:
                      configuration:
                        description: |-
                          Projected volumes containing custom pgBackRest configuration.  These files are mounted
                          under "/etc/pgbackrest/conf.d" alongside any pgBackRest configuration generated by the
                          PostgreSQL Operator:
                          https://pgbackrest.org/configuration.html
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                        type: array
                      global:
                        additionalProperties:
                          type: string
                        description: |-
                          Global pgBackRest configuration settings.  These settings are included in the "global"
                          section of the pgBackRest configuration generated by the PostgreSQL Operator, and then
                          mounted under "/etc/pgbackrest/conf.d":
                          https://pgbackrest.org/configuration.html
                        type: object
                      image:
                        description: |-
                          The image name to use for pgBackRest containers.  Utilized to run
                          pgBackRest repository hosts and backups. The image may also be set using
                          the RELATED_IMAGE_PGBACKREST environment variable
                        type: string
                      jobs:
                        description: Jobs field allows configuration for all backup
                          jobs
                        properties:
                          affinity:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                            description: |-
                              Scheduling constraints of pgBackRest backup Job pods.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                          priorityClassName:
                            description: |-
                              Priority class name for the pgBackRest backup Job pods.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                            type: string
                          resources:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                            description: |-
                              Resource limits for backup jobs. Includes manual, scheduled and replica
                              create backups
                          securityContext:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                            description: SecurityContext defines the security settings
                              for PGBackRest pod.
                          tolerations:
                            description: |-
                              Tolerations of pgBackRest backup Job pods.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                          ttlSecondsAfterFinished:
                            description: |-
                              Limit the lifetime of a Job that has finished.
                              More info: https://kubernetes.io/docs/concepts/workloads/controllers/job
                            format: int32
                            minimum: 60
                            type: integer
                        type: object
                      manual:
                        description: Defines details for manual pgBackRest backup
                          Jobs
                        properties:
                          options:
                            description: |-
                              Command line options to include when running the pgBackRest backup command.
                              https://pgbackrest.org/command.html#command-backup
                            items:
                              type: string
                            type: array
                          repoName:
                            description: The name of the pgBackRest repo to run the
                              backup command against.
                            pattern: ^repo[1-4]
                            type: string
                        required:
                        - repoName
                        type: object
                      metadata:
                        description: Metadata contains metadata for custom resources
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          labels:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      repoHost:
                        description: |-
                          Defines configuration for a pgBackRest dedicated repository host.  This section is only
                          applicable if at least one "volume" (i.e. PVC-based) repository is defined in the "repos"
                          section, therefore enabling a dedicated repository host Deployment.
                        properties:
                          affinity:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                            description: |-
                              Scheduling constraints of the Dedicated repo host pod.
                              Changing this value causes repo host to restart.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                          priorityClassName:
                            description: |-
                              Priority class name for the pgBackRest repo host pod. Changing this value
                              causes PostgreSQL to restart.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                            type: string
                          resources:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                            description: Resource requirements for a pgBackRest repository
                              host
                          securityContext:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                            description: SecurityContext defines the security settings
                              for PGBackRest pod.
                          sshConfigMap:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ConfigMapProjection'
                            description: |-
                              ConfigMap containing custom SSH configuration.
                              Deprecated: Repository hosts use mTLS for encryption, authentication, and authorization.
                          sshSecret:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                            description: |-
                              Secret containing custom SSH keys.
                              Deprecated: Repository hosts use mTLS for encryption, authentication, and authorization.
                          tolerations:
                            description: |-
                              Tolerations of a PgBackRest repo host pod. Changing this value causes a restart.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                          topologySpreadConstraints:
                            description: |-
                              Topology spread constraints of a Dedicated repo host pod. Changing this
                              value causes the repo host to restart.
                              More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                            type: array
                        type: object
                      repos:
                        description: Defines a pgBackRest repository
                        items:
                          description: PGBackRestRepo represents a pgBackRest repository.  Only
                            one of its members may be specified.
                          properties:
                            azure:
                              description: Represents a pgBackRest repository that
                                is created using Azure storage
                              properties:
                                container:
                                  description: The Azure container utilized for the
                                    repository
                                  type: string
                              required:
                              - container
                              type: object
                            gcs:
                              description: Represents a pgBackRest repository that
                                is created using Google Cloud Storage
                              properties:
                                bucket:
                                  description: The GCS bucket utilized for the repository
                                  type: string
                              required:
                              - bucket
                              type: object
                            name:
                              description: The name of the repository
                              pattern: ^repo[1-4]
                              type: string
                            s3:
                              description: |-
                                RepoS3 represents a pgBackRest repository that is created using AWS S3 (or S3-compatible)
                                storage
                              properties:
                                bucket:
                                  description: The S3 bucket utilized for the repository
                                  type: string
                                endpoint:
                                  description: A valid endpoint corresponding to the
                                    specified region
                                  type: string
                                region:
                                  description: The region corresponding to the S3
                                    bucket
                                  type: string
                              required:
                              - bucket
                              - endpoint
                              - region
                              type: object
                            schedules:
                              description: |-
                                Defines the schedules for the pgBackRest backups
                                Full, Differential and Incremental backup types are supported:
                                https://pgbackrest.org/user-guide.html#concept/backup
                              properties:
                                differential:
                                  description: |-
                                    Defines the Cron schedule for a differential pgBackRest backup.
                                    Follows the standard Cron schedule syntax:
                                    https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                  minLength: 6
                                  type: string
                                full:
                                  description: |-
                                    Defines the Cron schedule for a full pgBackRest backup.
                                    Follows the standard Cron schedule syntax:
                                    https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                  minLength: 6
                                  type: string
                                incremental:
                                  description: |-
                                    Defines the Cron schedule for an incremental pgBackRest backup.
                                    Follows the standard Cron schedule syntax:
                                    https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                  minLength: 6
                                  type: string
                              type: object
                            volume:
                              description: Represents a pgBackRest repository that
                                is created using a PersistentVolumeClaim
                              properties:
                                volumeClaimSpec:
                                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                                  description: Defines a PersistentVolumeClaim spec
                                    used to create and/or bind a volume
                              required:
                              - volumeClaimSpec
                              type: object
                          required:
                          - name
                          type: object
                        minItems: 1
                        type: array
                        x-kubernetes-list-map-keys:
                        - name
                        x-kubernetes-list-type: map
                      restore:
                        description: Defines details for performing an in-place restore
                          using pgBackRest
                        properties:
                          affinity:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                            description: |-
                              Scheduling constraints of the pgBackRest restore Job.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                          clusterName:
                            description: |-
                              The name of an existing PostgresCluster to use as the data source for the new PostgresCluster.
                              Defaults to the name of the PostgresCluster being created if not provided.
                            type: string
                          clusterNamespace:
                            description: |-
                              The namespace of the cluster specified as the data source using the clusterName field.
                              Defaults to the namespace of the PostgresCluster being created if not provided.
                            type: string
                          enabled:
                            default: false
                            description: Whether or not in-place pgBackRest restores
                              are enabled for this PostgresCluster.
                            type: boolean
                          options:
                            description: |-
                              Command line options to include when running the pgBackRest restore command.
                              https://pgbackrest.org/command.html#command-restore
                            items:
                              type: string
                            type: array
                          priorityClassName:
                            description: |-
                              Priority class name for the pgBackRest restore Job pod. Changing this
                              value causes PostgreSQL to restart.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                            type: string
                          repoName:
                            default: repo1
                            description: |-
                              The name of the pgBackRest repo within the source PostgresCluster that contains the backups
                              that should be utilized to perform a pgBackRest restore when initializing the data source
                              for the new PostgresCluster.
                              K8SPG-511. Add default value to this field.
                            pattern: ^repo[1-4]
                            type: string
                          resources:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                            description: Resource requirements for the pgBackRest
                              restore Job.
                          tolerations:
                            description: |-
                              Tolerations of the pgBackRest restore Job.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                        required:
                        - enabled
                        - repoName
                        type: object
                      sidecars:
                        description: Configuration for pgBackRest sidecar containers
                        properties:
                          pgbackrest:
                            description: Defines the configuration for the pgBackRest
                              sidecar container
                            properties:
                              resources:
                                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                                description: Resource requirements for a sidecar container
                            type: object
                          pgbackrestConfig:
                            description: Defines the configuration for the pgBackRest
                              config sidecar container
                            properties:
                              resources:
                                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                                description: Resource requirements for a sidecar container
                            type: object
                        type: object
                    required:
                    - repos
                    type: object
                required:
                - pgbackrest
                type: object
              config:
                properties:
                  files:
                    items:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                    type: array
                type: object
              customReplicationTLSSecret:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                description: |-
                  The secret containing the replication client certificates and keys for
                  secure connections to the PostgreSQL server. It will need to contain the
                  client TLS certificate, TLS key and the Certificate Authority certificate
                  with the data keys set to tls.crt, tls.key and ca.crt, respectively.
                  NOTE: If CustomReplicationClientTLSSecret is provided, CustomTLSSecret
                  MUST be provided and the ca.crt provided must be the same.
              customRootCATLSSecret:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                description: |-
                  The secret containing the root CA certificate and key for
                  secure connections to the PostgreSQL server. It will need to contain the
                  CA TLS certificate and CA TLS key with the data keys set to
                  root.crt and root.key, respectively.
                  Part of K8SPG-553 ticket.
              customTLSSecret:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                description: |-
                  The secret containing the Certificates and Keys to encrypt PostgreSQL
                  traffic will need to contain the server TLS certificate, TLS key and the
                  Certificate Authority certificate with the data keys set to tls.crt,
                  tls.key and ca.crt, respectively. It will then be mounted as a volume
                  projection to the '/pgconf/tls' directory. For more information on
                  Kubernetes secret projections, please see
                  https://k8s.io/docs/concepts/configuration/secret/#projection-of-secret-keys-to-specific-paths
                  NOTE: If CustomTLSSecret is provided, CustomReplicationClientTLSSecret
                  MUST be provided and the ca.crt provided must be the same.
              dataSource:
                description: Specifies a data source for bootstrapping the PostgreSQL
                  cluster.
                properties:
                  pgbackrest:
                    description: |-
                      Defines a pgBackRest cloud-based data source that can be used to pre-populate the
                      PostgreSQL data directory for a new PostgreSQL cluster using a pgBackRest restore.
                      The PGBackRest field is incompatible with the PostgresCluster field: only one
                      data source can be used for pre-populating a new PostgreSQL cluster
                    properties:
                      affinity:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                        description: |-
                          Scheduling constraints of the pgBackRest restore Job.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                      configuration:
                        description: |-
                          Projected volumes containing custom pgBackRest configuration.  These files are mounted
                          under "/etc/pgbackrest/conf.d" alongside any pgBackRest configuration generated by the
                          PostgreSQL Operator:
                          https://pgbackrest.org/configuration.html
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                        type: array
                      global:
                        additionalProperties:
                          type: string
                        description: |-
                          Global pgBackRest configuration settings.  These settings are included in the "global"
                          section of the pgBackRest configuration generated by the PostgreSQL Operator, and then
                          mounted under "/etc/pgbackrest/conf.d":
                          https://pgbackrest.org/configuration.html
                        type: object
                      options:
                        description: |-
                          Command line options to include when running the pgBackRest restore command.
                          https://pgbackrest.org/command.html#command-restore
                        items:
                          type: string
                        type: array
                      priorityClassName:
                        description: |-
                          Priority class name for the pgBackRest restore Job pod. Changing this
                          value causes PostgreSQL to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                        type: string
                      repo:
                        default: repo1
                        description: |-
                          Defines a pgBackRest repository
                          K8SPG-511. Add default value to this field.
                        properties:
                          azure:
                            description: Represents a pgBackRest repository that is
                              created using Azure storage
                            properties:
                              container:
                                description: The Azure container utilized for the
                                  repository
                                type: string
                            required:
                            - container
                            type: object
                          gcs:
                            description: Represents a pgBackRest repository that is
                              created using Google Cloud Storage
                            properties:
                              bucket:
                                description: The GCS bucket utilized for the repository
                                type: string
                            required:
                            - bucket
                            type: object
                          name:
                            description: The name of the repository
                            pattern: ^repo[1-4]
                            type: string
                          s3:
                            description: |-
                              RepoS3 represents a pgBackRest repository that is created using AWS S3 (or S3-compatible)
                              storage
                            properties:
                              bucket:
                                description: The S3 bucket utilized for the repository
                                type: string
                              endpoint:
                                description: A valid endpoint corresponding to the
                                  specified region
                                type: string
                              region:
                                description: The region corresponding to the S3 bucket
                                type: string
                            required:
                            - bucket
                            - endpoint
                            - region
                            type: object
                          schedules:
                            description: |-
                              Defines the schedules for the pgBackRest backups
                              Full, Differential and Incremental backup types are supported:
                              https://pgbackrest.org/user-guide.html#concept/backup
                            properties:
                              differential:
                                description: |-
                                  Defines the Cron schedule for a differential pgBackRest backup.
                                  Follows the standard Cron schedule syntax:
                                  https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                minLength: 6
                                type: string
                              full:
                                description: |-
                                  Defines the Cron schedule for a full pgBackRest backup.
                                  Follows the standard Cron schedule syntax:
                                  https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                minLength: 6
                                type: string
                              incremental:
                                description: |-
                                  Defines the Cron schedule for an incremental pgBackRest backup.
                                  Follows the standard Cron schedule syntax:
                                  https://k8s.io/docs/concepts/workloads/controllers/cron-jobs/#cron-schedule-syntax
                                minLength: 6
                                type: string
                            type: object
                          volume:
                            description: Represents a pgBackRest repository that is
                              created using a PersistentVolumeClaim
                            properties:
                              volumeClaimSpec:
                                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                                description: Defines a PersistentVolumeClaim spec
                                  used to create and/or bind a volume
                            required:
                            - volumeClaimSpec
                            type: object
                        required:
                        - name
                        type: object
                      resources:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                        description: Resource requirements for the pgBackRest restore
                          Job.
                      stanza:
                        default: db
                        description: |-
                          The name of an existing pgBackRest stanza to use as the data source for the new PostgresCluster.
                          Defaults to `db` if not provided.
                        type: string
                      tolerations:
                        description: |-
                          Tolerations of the pgBackRest restore Job.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                        type: array
                    required:
                    - repo
                    - stanza
                    type: object
                  postgresCluster:
                    description: |-
                      Defines a pgBackRest data source that can be used to pre-populate the PostgreSQL data
                      directory for a new PostgreSQL cluster using a pgBackRest restore.
                      The PGBackRest field is incompatible with the PostgresCluster field: only one
                      data source can be used for pre-populating a new PostgreSQL cluster
                    properties:
                      affinity:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                        description: |-
                          Scheduling constraints of the pgBackRest restore Job.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                      clusterName:
                        description: |-
                          The name of an existing PostgresCluster to use as the data source for the new PostgresCluster.
                          Defaults to the name of the PostgresCluster being created if not provided.
                        type: string
                      clusterNamespace:
                        description: |-
                          The namespace of the cluster specified as the data source using the clusterName field.
                          Defaults to the namespace of the PostgresCluster being created if not provided.
                        type: string
                      options:
                        description: |-
                          Command line options to include when running the pgBackRest restore command.
                          https://pgbackrest.org/command.html#command-restore
                        items:
                          type: string
                        type: array
                      priorityClassName:
                        description: |-
                          Priority class name for the pgBackRest restore Job pod. Changing this
                          value causes PostgreSQL to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                        type: string
                      repoName:
                        default: repo1
                        description: |-
                          The name of the pgBackRest repo within the source PostgresCluster that contains the backups
                          that should be utilized to perform a pgBackRest restore when initializing the data source
                          for the new PostgresCluster.
                          K8SPG-511. Add default value to this field.
                        pattern: ^repo[1-4]
                        type: string
                      resources:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                        description: Resource requirements for the pgBackRest restore
                          Job.
                      tolerations:
                        description: |-
                          Tolerations of the pgBackRest restore Job.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                        type: array
                    required:
                    - repoName
                    type: object
                  volumes:
                    description: Defines any existing volumes to reuse for this PostgresCluster.
                    properties:
                      pgBackRestVolume:
                        description: |-
                          Defines the existing pgBackRest repo volume and directory to use in the
                          current PostgresCluster.
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            description: Annotations of the move dir Job.
                            type: object
                          directory:
                            description: |-
                              The existing directory. When not set, a move Job is not created for the
                              associated volume.
                            type: string
                          labels:
                            additionalProperties:
                              type: string
                            description: Labels of the move dir Job.
                            type: object
                          pvcName:
                            description: The existing PVC name.
                            type: string
                          tolerations:
                            description: |-
                              Tolerations of the move dir Job.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                        required:
                        - pvcName
                        type: object
                      pgDataVolume:
                        description: |-
                          Defines the existing pgData volume and directory to use in the current
                          PostgresCluster.
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            description: Annotations of the move dir Job.
                            type: object
                          directory:
                            description: |-
                              The existing directory. When not set, a move Job is not created for the
                              associated volume.
                            type: string
                          labels:
                            additionalProperties:
                              type: string
                            description: Labels of the move dir Job.
                            type: object
                          pvcName:
                            description: The existing PVC name.
                            type: string
                          tolerations:
                            description: |-
                              Tolerations of the move dir Job.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                        required:
                        - pvcName
                        type: object
                      pgWALVolume:
                        description: |-
                          Defines the existing pg_wal volume and directory to use in the current
                          PostgresCluster. Note that a defined pg_wal volume MUST be accompanied by
                          a pgData volume.
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            description: Annotations of the move dir Job.
                            type: object
                          directory:
                            description: |-
                              The existing directory. When not set, a move Job is not created for the
                              associated volume.
                            type: string
                          labels:
                            additionalProperties:
                              type: string
                            description: Labels of the move dir Job.
                            type: object
                          pvcName:
                            description: The existing PVC name.
                            type: string
                          tolerations:
                            description: |-
                              Tolerations of the move dir Job.
                              More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                            type: array
                        required:
                        - pvcName
                        type: object
                    type: object
                type: object
              databaseInitSQL:
                description: |-
                  DatabaseInitSQL defines a ConfigMap containing custom SQL that will
                  be run after the cluster is initialized. This ConfigMap must be in the same
                  namespace as the cluster.
                properties:
                  key:
                    description: Key is the ConfigMap data key that points to a SQL
                      string
                    type: string
                  name:
                    description: Name is the name of a ConfigMap
                    type: string
                required:
                - key
                - name
                type: object
              disableDefaultPodScheduling:
                description: |-
                  Whether or not the PostgreSQL cluster should use the defined default
                  scheduling constraints. If the field is unset or false, the default
                  scheduling constraints will be used in addition to any custom constraints
                  provided.
                type: boolean
              extensions:
                properties:
                  pgAudit:
                    type: boolean
                  pgStatMonitor:
                    type: boolean
                  pgStatStatements:
                    type: boolean
                type: object
              image:
                description: |-
                  The image name to use for PostgreSQL containers. When omitted, the value
                  comes from an operator environment variable. For standard PostgreSQL images,
                  the format is RELATED_IMAGE_POSTGRES_{postgresVersion},
                  e.g. RELATED_IMAGE_POSTGRES_13. For PostGIS enabled PostgreSQL images,
                  the format is RELATED_IMAGE_POSTGRES_{postgresVersion}_GIS_{postGISVersion},
                  e.g. RELATED_IMAGE_POSTGRES_13_GIS_3.1.
                type: string
              imagePullPolicy:
                $ref: '#/definitions/k8s.io~1api~1core~1v1~0PullPolicy'
                description: |-
                  ImagePullPolicy is used to determine when Kubernetes will attempt to
                  pull (download) container images.
                  More info: https://kubernetes.io/docs/concepts/containers/images/#image-pull-policy
                enum:
                - Always
                - Never
                - IfNotPresent
              imagePullSecrets:
                description: |-
                  The image pull secrets used to pull from a private registry
                  Changing this value causes all running pods to restart.
                  https://k8s.io/docs/tasks/configure-pod-container/pull-image-private-registry/
                items:
                  $ref: '#/definitions/k8s.io~1api~1core~1v1~0LocalObjectReference'
                type: array
              instances:
                description: |-
                  Specifies one or more sets of PostgreSQL pods that replicate data for
                  this cluster.
                items:
                  properties:
                    affinity:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                      description: |-
                        Scheduling constraints of a PostgreSQL pod. Changing this value causes
                        PostgreSQL to restart.
                        More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                    containers:
                      description: |-
                        Custom sidecars for PostgreSQL instance pods. Changing this value causes
                        PostgreSQL to restart.
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                      type: array
                    dataVolumeClaimSpec:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                      description: |-
                        Defines a PersistentVolumeClaim for PostgreSQL data.
                        More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes
                    initContainers:
                      description: |-
                        Additional init containers for PostgreSQL instance pods. Changing this value causes
                        PostgreSQL to restart.
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                      type: array
                    metadata:
                      description: Metadata contains metadata for custom resources
                      properties:
                        annotations:
                          additionalProperties:
                            type: string
                          type: object
                        labels:
                          additionalProperties:
                            type: string
                          type: object
                      type: object
                    minAvailable:
                      anyOf:
                      - type: integer
                      - type: string
                      description: |-
                        Minimum number of pods that should be available at a time.
                        Defaults to one when the replicas field is greater than one.
                      x-kubernetes-int-or-string: true
                    name:
                      default: ""
                      description: |-
                        Name that associates this set of PostgreSQL pods. This field is optional
                        when only one instance set is defined. Each instance set in a cluster
                        must have a unique name. The combined length of this and the cluster name
                        must be 46 characters or less.
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?)?$
                      type: string
                    priorityClassName:
                      description: |-
                        Priority class name for the PostgreSQL pod. Changing this value causes
                        PostgreSQL to restart.
                        More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                      type: string
                    replicas:
                      default: 1
                      description: Number of desired PostgreSQL pods.
                      format: int32
                      minimum: 1
                      type: integer
                    resources:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                      description: Compute resources of a PostgreSQL container.
                    securityContext:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                      description: SecurityContext defines the security settings for
                        a PostgreSQL pod.
                    sidecars:
                      description: Configuration for instance sidecar containers
                      properties:
                        replicaCertCopy:
                          description: Defines the configuration for the replica cert
                            copy sidecar container
                          properties:
                            resources:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                              description: Resource requirements for a sidecar container
                          type: object
                      type: object
                    tablespaceVolumes:
                      description: |-
                        The list of tablespaces volumes to mount for this postgrescluster
                        This field requires enabling TablespaceVolumes feature gate
                      items:
                        properties:
                          dataVolumeClaimSpec:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                            description: |-
                              Defines a PersistentVolumeClaim for a tablespace.
                              More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes
                          name:
                            description: |-
                              The name for the tablespace, used as the path name for the volume.
                              Must be unique in the instance set since they become the directory names.
                            minLength: 1
                            pattern: ^[a-z][a-z0-9]*$
                            type: string
                        required:
                        - dataVolumeClaimSpec
                        - name
                        type: object
                      type: array
                      x-kubernetes-list-map-keys:
                      - name
                      x-kubernetes-list-type: map
                    tolerations:
                      description: |-
                        Tolerations of a PostgreSQL pod. Changing this value causes PostgreSQL to restart.
                        More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                      type: array
                    topologySpreadConstraints:
                      description: |-
                        Topology spread constraints of a PostgreSQL pod. Changing this value causes
                        PostgreSQL to restart.
                        More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                      type: array
                    volumeMounts:
                      description: |-
                        The list of volume mounts to mount to PostgreSQL instance pods. Chaning this value causes
                        PostgreSQL to restart.
                      items:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeMount'
                      type: array
                    walVolumeClaimSpec:
                      $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                      description: |-
                        Defines a separate PersistentVolumeClaim for PostgreSQL's write-ahead log.
                        More info: https://www.postgresql.org/docs/current/wal.html
                  required:
                  - dataVolumeClaimSpec
                  type: object
                minItems: 1
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              metadata:
                description: Metadata contains metadata for custom resources
                properties:
                  annotations:
                    additionalProperties:
                      type: string
                    type: object
                  labels:
                    additionalProperties:
                      type: string
                    type: object
                type: object
              monitoring:
                description: The specification of monitoring tools that connect to
                  PostgreSQL
                properties:
                  pgmonitor:
                    description: PGMonitorSpec defines the desired state of the pgMonitor
                      tool suite
                    properties:
                      exporter:
                        properties:
                          configuration:
                            description: |-
                              Projected volumes containing custom PostgreSQL Exporter configuration.  Currently supports
                              the customization of PostgreSQL Exporter queries. If a "queries.yml" file is detected in
                              any volume projected using this field, it will be loaded using the "extend.query-path" flag:
                              https://github.com/prometheus-community/postgres_exporter#flags
                              Changing the values of field causes PostgreSQL and the exporter to restart.
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                            type: array
                          customTLSSecret:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                            description: |-
                              Projected secret containing custom TLS certificates to encrypt output from the exporter
                              web server
                          image:
                            description: |-
                              The image name to use for crunchy-postgres-exporter containers. The image may
                              also be set using the RELATED_IMAGE_PGEXPORTER environment variable.
                            type: string
                          resources:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                            description: |-
                              Changing this value causes PostgreSQL and the exporter to restart.
                              More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers
                        type: object
                    type: object
                type: object
              openshift:
                description: |-
                  Whether or not the PostgreSQL cluster is being deployed to an OpenShift
                  environment. If the field is unset, the operator will automatically
                  detect the environment.
                type: boolean
              patroni:
                properties:
                  dynamicConfiguration:
                    description: |-
                      Patroni dynamic configuration settings. Changes to this value will be
                      automatically reloaded without validation. Changes to certain PostgreSQL
                      parameters cause PostgreSQL to restart.
                      More info: https://patroni.readthedocs.io/en/latest/dynamic_configuration.html
                    type: object
                    x-kubernetes-preserve-unknown-fields: true
                  leaderLeaseDurationSeconds:
                    default: 30
                    description: |-
                      TTL of the cluster leader lock. "Think of it as the
                      length of time before initiation of the automatic failover process."
                      Changing this value causes PostgreSQL to restart.
                    format: int32
                    minimum: 3
                    type: integer
                  port:
                    default: 8008
                    description: |-
                      The port on which Patroni should listen.
                      Changing this value causes PostgreSQL to restart.
                    format: int32
                    minimum: 1024
                    type: integer
                  switchover:
                    description: Switchover gives options to perform ad hoc switchovers
                      in a PostgresCluster.
                    properties:
                      enabled:
                        default: false
                        description: |-
                          Whether or not the operator should allow switchovers in a PostgresCluster
                          K8SPG-511. Add default value to this field.
                        type: boolean
                      targetInstance:
                        description: |-
                          The instance that should become primary during a switchover. This field is
                          optional when Type is "Switchover" and required when Type is "Failover".
                          When it is not specified, a healthy replica is automatically selected.
                        type: string
                      type:
                        default: Switchover
                        description: |-
                          Type of switchover to perform. Valid options are Switchover and Failover.
                          "Switchover" changes the primary instance of a healthy PostgresCluster.
                          "Failover" forces a particular instance to be primary, regardless of other
                          factors. A TargetInstance must be specified to failover.
                          NOTE: The Failover type is reserved as the "last resort" case.
                        enum:
                        - Switchover
                        - Failover
                        type: string
                    required:
                    - enabled
                    type: object
                  syncPeriodSeconds:
                    default: 10
                    description: |-
                      The interval for refreshing the leader lock and applying
                      dynamicConfiguration. Must be less than leaderLeaseDurationSeconds.
                      Changing this value causes PostgreSQL to restart.
                    format: int32
                    minimum: 1
                    type: integer
                type: object
              paused:
                description: |-
                  Suspends the rollout and reconciliation of changes made to the
                  PostgresCluster spec.
                type: boolean
              port:
                default: 5432
                description: The port on which PostgreSQL should listen.
                format: int32
                minimum: 1024
                type: integer
              postGISVersion:
                description: |-
                  The PostGIS extension version installed in the PostgreSQL image.
                  When image is not set, indicates a PostGIS enabled image will be used.
                type: string
              postgresVersion:
                description: The major version of PostgreSQL installed in the PostgreSQL
                  image
                maximum: 16
                minimum: 12
                type: integer
              proxy:
                description: The specification of a proxy that connects to PostgreSQL.
                properties:
                  pgBouncer:
                    description: Defines a PgBouncer proxy and connection pooler.
                    properties:
                      affinity:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                        description: |-
                          Scheduling constraints of a PgBouncer pod. Changing this value causes
                          PgBouncer to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                      config:
                        description: |-
                          Configuration settings for the PgBouncer process. Changes to any of these
                          values will be automatically reloaded without validation. Be careful, as
                          you may put PgBouncer into an unusable state.
                          More info: https://www.pgbouncer.org/usage.html#reload
                        properties:
                          databases:
                            additionalProperties:
                              type: string
                            description: |-
                              PgBouncer database definitions. The key is the database requested by a
                              client while the value is a libpq-styled connection string. The special
                              key "*" acts as a fallback. When this field is empty, PgBouncer is
                              configured with a single "*" entry that connects to the primary
                              PostgreSQL instance.
                              More info: https://www.pgbouncer.org/config.html#section-databases
                            type: object
                          files:
                            description: |-
                              Files to mount under "/etc/pgbouncer". When specified, settings in the
                              "pgbouncer.ini" file are loaded before all others. From there, other
                              files may be included by absolute path. Changing these references causes
                              PgBouncer to restart, but changes to the file contents are automatically
                              reloaded.
                              More info: https://www.pgbouncer.org/config.html#include-directive
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                            type: array
                          global:
                            additionalProperties:
                              type: string
                            description: |-
                              Settings that apply to the entire PgBouncer process.
                              More info: https://www.pgbouncer.org/config.html
                            type: object
                          users:
                            additionalProperties:
                              type: string
                            description: |-
                              Connection settings specific to particular users.
                              More info: https://www.pgbouncer.org/config.html#section-users
                            type: object
                        type: object
                      containers:
                        description: |-
                          Custom sidecars for a PgBouncer pod. Changing this value causes
                          PgBouncer to restart.
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Container'
                        type: array
                      customTLSSecret:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretProjection'
                        description: |-
                          A secret projection containing a certificate and key with which to encrypt
                          connections to PgBouncer. The "tls.crt", "tls.key", and "ca.crt" paths must
                          be PEM-encoded certificates and keys. Changing this value causes PgBouncer
                          to restart.
                          More info: https://kubernetes.io/docs/concepts/configuration/secret/#projection-of-secret-keys-to-specific-paths
                      exposeSuperusers:
                        description: Allow SUPERUSERs to connect through PGBouncer.
                        type: boolean
                      image:
                        description: |-
                          Name of a container image that can run PgBouncer 1.15 or newer. Changing
                          this value causes PgBouncer to restart. The image may also be set using
                          the RELATED_IMAGE_PGBOUNCER environment variable.
                          More info: https://kubernetes.io/docs/concepts/containers/images
                        type: string
                      metadata:
                        description: Metadata contains metadata for custom resources
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          labels:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      minAvailable:
                        anyOf:
                        - type: integer
                        - type: string
                        description: |-
                          Minimum number of pods that should be available at a time.
                          Defaults to one when the replicas field is greater than one.
                        x-kubernetes-int-or-string: true
                      port:
                        default: 5432
                        description: |-
                          Port on which PgBouncer should listen for client connections. Changing
                          this value causes PgBouncer to restart.
                        format: int32
                        minimum: 1024
                        type: integer
                      priorityClassName:
                        description: |-
                          Priority class name for the pgBouncer pod. Changing this value causes
                          PostgreSQL to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                        type: string
                      replicas:
                        default: 1
                        description: Number of desired PgBouncer pods.
                        format: int32
                        minimum: 0
                        type: integer
                      resources:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                        description: |-
                          Compute resources of a PgBouncer container. Changing this value causes
                          PgBouncer to restart.
                          More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers
                      securityContext:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0PodSecurityContext'
                        description: SecurityContext defines the security settings
                          for PGBouncer pods.
                      service:
                        description: Specification of the service that exposes PgBouncer.
                        properties:
                          externalTrafficPolicy:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceExternalTrafficPolicy'
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                            enum:
                            - Cluster
                            - Local
                          internalTrafficPolicy:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceInternalTrafficPolicy'
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                            enum:
                            - Cluster
                            - Local
                          loadBalancerSourceRanges:
                            description: |-
                              LoadBalancerSourceRanges is a list of IP CIDRs allowed access to load.
                              This field will be ignored if the cloud-provider does not support the feature.
                            items:
                              type: string
                            type: array
                          metadata:
                            description: Metadata contains metadata for custom resources
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          nodePort:
                            description: |-
                              The port on which this service is exposed when type is NodePort or
                              LoadBalancer. Value must be in-range and not in use or the operation will
                              fail. If unspecified, a port will be allocated if this Service requires one.
                              - https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
                            format: int32
                            type: integer
                          type:
                            default: ClusterIP
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types'
                            enum:
                            - ClusterIP
                            - NodePort
                            - LoadBalancer
                            type: string
                        type: object
                      sidecars:
                        description: Configuration for pgBouncer sidecar containers
                        properties:
                          pgbouncerConfig:
                            description: Defines the configuration for the pgBouncer
                              config sidecar container
                            properties:
                              resources:
                                $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                                description: Resource requirements for a sidecar container
                            type: object
                        type: object
                      tolerations:
                        description: |-
                          Tolerations of a PgBouncer pod. Changing this value causes PgBouncer to
                          restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                        type: array
                      topologySpreadConstraints:
                        description: |-
                          Topology spread constraints of a PgBouncer pod. Changing this value causes
                          PgBouncer to restart.
                          More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                        type: array
                    type: object
                required:
                - pgBouncer
                type: object
              replicaService:
                description: Specification of the service that exposes PostgreSQL
                  replica instances
                properties:
                  externalTrafficPolicy:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceExternalTrafficPolicy'
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                    enum:
                    - Cluster
                    - Local
                  internalTrafficPolicy:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceInternalTrafficPolicy'
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                    enum:
                    - Cluster
                    - Local
                  loadBalancerSourceRanges:
                    description: |-
                      LoadBalancerSourceRanges is a list of IP CIDRs allowed access to load.
                      This field will be ignored if the cloud-provider does not support the feature.
                    items:
                      type: string
                    type: array
                  metadata:
                    description: Metadata contains metadata for custom resources
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  nodePort:
                    description: |-
                      The port on which this service is exposed when type is NodePort or
                      LoadBalancer. Value must be in-range and not in use or the operation will
                      fail. If unspecified, a port will be allocated if this Service requires one.
                      - https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
                    format: int32
                    type: integer
                  type:
                    default: ClusterIP
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types'
                    enum:
                    - ClusterIP
                    - NodePort
                    - LoadBalancer
                    type: string
                type: object
              service:
                description: Specification of the service that exposes the PostgreSQL
                  primary instance.
                properties:
                  externalTrafficPolicy:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceExternalTrafficPolicy'
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                    enum:
                    - Cluster
                    - Local
                  internalTrafficPolicy:
                    $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceInternalTrafficPolicy'
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                    enum:
                    - Cluster
                    - Local
                  loadBalancerSourceRanges:
                    description: |-
                      LoadBalancerSourceRanges is a list of IP CIDRs allowed access to load.
                      This field will be ignored if the cloud-provider does not support the feature.
                    items:
                      type: string
                    type: array
                  metadata:
                    description: Metadata contains metadata for custom resources
                    properties:
                      annotations:
                        additionalProperties:
                          type: string
                        type: object
                      labels:
                        additionalProperties:
                          type: string
                        type: object
                    type: object
                  nodePort:
                    description: |-
                      The port on which this service is exposed when type is NodePort or
                      LoadBalancer. Value must be in-range and not in use or the operation will
                      fail. If unspecified, a port will be allocated if this Service requires one.
                      - https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
                    format: int32
                    type: integer
                  type:
                    default: ClusterIP
                    description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types'
                    enum:
                    - ClusterIP
                    - NodePort
                    - LoadBalancer
                    type: string
                type: object
              shutdown:
                description: |-
                  Whether or not the PostgreSQL cluster should be stopped.
                  When this is true, workloads are scaled to zero and CronJobs
                  are suspended.
                  Other resources, such as Services and Volumes, remain in place.
                type: boolean
              standby:
                description: Run this cluster as a read-only copy of an existing cluster
                  or archive.
                properties:
                  enabled:
                    default: true
                    description: |-
                      Whether or not the PostgreSQL cluster should be read-only. When this is
                      true, WAL files are applied from a pgBackRest repository or another
                      PostgreSQL server.
                    type: boolean
                  host:
                    description: Network address of the PostgreSQL server to follow
                      via streaming replication.
                    type: string
                  port:
                    description: Network port of the PostgreSQL server to follow via
                      streaming replication.
                    format: int32
                    minimum: 1024
                    type: integer
                  repoName:
                    description: The name of the pgBackRest repository to follow for
                      WAL files.
                    pattern: ^repo[1-4]
                    type: string
                type: object
              supplementalGroups:
                description: |-
                  A list of group IDs applied to the process of a container. These can be
                  useful when accessing shared file systems with constrained permissions.
                  More info: https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/pod-v1/#security-context
                items:
                  format: int64
                  type: integer
                type: array
              userInterface:
                description: The specification of a user interface that connects to
                  PostgreSQL.
                properties:
                  pgAdmin:
                    description: Defines a pgAdmin user interface.
                    properties:
                      affinity:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0Affinity'
                        description: |-
                          Scheduling constraints of a pgAdmin pod. Changing this value causes
                          pgAdmin to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/assign-pod-node
                      config:
                        description: |-
                          Configuration settings for the pgAdmin process. Changes to any of these
                          values will be loaded without validation. Be careful, as
                          you may put pgAdmin into an unusable state.
                        properties:
                          files:
                            description: |-
                              Files allows the user to mount projected volumes into the pgAdmin
                              container so that files can be referenced by pgAdmin as needed.
                            items:
                              $ref: '#/definitions/k8s.io~1api~1core~1v1~0VolumeProjection'
                            type: array
                          ldapBindPassword:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0SecretKeySelector'
                            description: |-
                              A Secret containing the value for the LDAP_BIND_PASSWORD setting.
                              More info: https://www.pgadmin.org/docs/pgadmin4/latest/ldap.html
                          settings:
                            description: |-
                              Settings for the pgAdmin server process. Keys should be uppercase and
                              values must be constants.
                              More info: https://www.pgadmin.org/docs/pgadmin4/latest/config_py.html
                            type: object
                            x-kubernetes-preserve-unknown-fields: true
                        type: object
                      dataVolumeClaimSpec:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0PersistentVolumeClaimSpec'
                        description: |-
                          Defines a PersistentVolumeClaim for pgAdmin data.
                          More info: https://kubernetes.io/docs/concepts/storage/persistent-volumes
                      image:
                        description: |-
                          Name of a container image that can run pgAdmin 4. Changing this value causes
                          pgAdmin to restart. The image may also be set using the RELATED_IMAGE_PGADMIN
                          environment variable.
                          More info: https://kubernetes.io/docs/concepts/containers/images
                        type: string
                      metadata:
                        description: Metadata contains metadata for custom resources
                        properties:
                          annotations:
                            additionalProperties:
                              type: string
                            type: object
                          labels:
                            additionalProperties:
                              type: string
                            type: object
                        type: object
                      priorityClassName:
                        description: |-
                          Priority class name for the pgAdmin pod. Changing this value causes pgAdmin
                          to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/pod-priority-preemption/
                        type: string
                      replicas:
                        default: 1
                        description: Number of desired pgAdmin pods.
                        format: int32
                        maximum: 1
                        minimum: 0
                        type: integer
                      resources:
                        $ref: '#/definitions/k8s.io~1api~1core~1v1~0ResourceRequirements'
                        description: |-
                          Compute resources of a pgAdmin container. Changing this value causes
                          pgAdmin to restart.
                          More info: https://kubernetes.io/docs/concepts/configuration/manage-resources-containers
                      service:
                        description: Specification of the service that exposes pgAdmin.
                        properties:
                          externalTrafficPolicy:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceExternalTrafficPolicy'
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                            enum:
                            - Cluster
                            - Local
                          internalTrafficPolicy:
                            $ref: '#/definitions/k8s.io~1api~1core~1v1~0ServiceInternalTrafficPolicy'
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#traffic-policies'
                            enum:
                            - Cluster
                            - Local
                          loadBalancerSourceRanges:
                            description: |-
                              LoadBalancerSourceRanges is a list of IP CIDRs allowed access to load.
                              This field will be ignored if the cloud-provider does not support the feature.
                            items:
                              type: string
                            type: array
                          metadata:
                            description: Metadata contains metadata for custom resources
                            properties:
                              annotations:
                                additionalProperties:
                                  type: string
                                type: object
                              labels:
                                additionalProperties:
                                  type: string
                                type: object
                            type: object
                          nodePort:
                            description: |-
                              The port on which this service is exposed when type is NodePort or
                              LoadBalancer. Value must be in-range and not in use or the operation will
                              fail. If unspecified, a port will be allocated if this Service requires one.
                              - https://kubernetes.io/docs/concepts/services-networking/service/#type-nodeport
                            format: int32
                            type: integer
                          type:
                            default: ClusterIP
                            description: 'More info: https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types'
                            enum:
                            - ClusterIP
                            - NodePort
                            - LoadBalancer
                            type: string
                        type: object
                      tolerations:
                        description: |-
                          Tolerations of a pgAdmin pod. Changing this value causes pgAdmin to restart.
                          More info: https://kubernetes.io/docs/concepts/scheduling-eviction/taint-and-toleration
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0Toleration'
                        type: array
                      topologySpreadConstraints:
                        description: |-
                          Topology spread constraints of a pgAdmin pod. Changing this value causes
                          pgAdmin to restart.
                          More info: https://kubernetes.io/docs/concepts/workloads/pods/pod-topology-spread-constraints/
                        items:
                          $ref: '#/definitions/k8s.io~1api~1core~1v1~0TopologySpreadConstraint'
                        type: array
                    required:
                    - dataVolumeClaimSpec
                    type: object
                required:
                - pgAdmin
                type: object
              users:
                description: |-
                  Users to create inside PostgreSQL and the databases they should access.
                  The default creates one user that can access one database matching the
                  PostgresCluster name. An empty list creates no users. Removing a user
                  from this list does NOT drop the user nor revoke their access.
                items:
                  properties:
                    databases:
                      description: |-
                        Databases to which this user can connect and create objects. Removing a
                        database from this list does NOT revoke access. This field is ignored for
                        the "postgres" user.
                      items:
                        description: |-
                          PostgreSQL identifiers are limited in length but may contain any character.
                          More info: https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS
                        maxLength: 63
                        minLength: 1
                        type: string
                      type: array
                      x-kubernetes-list-type: set
                    name:
                      description: |-
                        The name of this PostgreSQL user. The value may contain only lowercase
                        letters, numbers, and hyphen so that it fits into Kubernetes metadata.
                      maxLength: 63
                      minLength: 1
                      pattern: ^[a-z0-9]([-a-z0-9]*[a-z0-9])?$
                      type: string
                    options:
                      description: |-
                        ALTER ROLE options except for PASSWORD. This field is ignored for the
                        "postgres" user.
                        More info: https://www.postgresql.org/docs/current/role-attributes.html
                      maxLength: 200
                      pattern: ^[^;]*$
                      type: string
                    password:
                      description: Properties of the password generated for this user.
                      properties:
                        type:
                          default: ASCII
                          description: |-
                            Type of password to generate. Defaults to ASCII. Valid options are ASCII
                            and AlphaNumeric.
                            "ASCII" passwords contain letters, numbers, and symbols from the US-ASCII character set.
                            "AlphaNumeric" passwords contain letters and numbers from the US-ASCII character set.
                          enum:
                          - ASCII
                          - AlphaNumeric
                          type: string
                      required:
                      - type
                      type: object
                    secretName:
                      description: The secret name to generate user, password, connection
                        info this PostgreSQL user.
                      maxLength: 63
                      minLength: 1
                      type: string
                  required:
                  - name
                  type: object
                maxItems: 64
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
            required:
            - backups
            - instances
            - postgresVersion
            type: object
          status:
            description: PostgresClusterStatus defines the observed state of PostgresCluster
            properties:
              conditions:
                description: |-
                  conditions represent the observations of postgrescluster's current state.
                  Known .status.conditions.type are: "PersistentVolumeResizing",
                  "Progressing", "ProxyAvailable"
                items:
                  description: "Condition contains details for one aspect of the current
                    state of this API Resource.\n---\nThis struct is intended for
                    direct use as an array at the field path .status.conditions.  For
                    example,\n\n\n\ttype FooStatus struct{\n\t    // Represents the
                    observations of a foo's current state.\n\t    // Known .status.conditions.type
                    are: \"Available\", \"Progressing\", and \"Degraded\"\n\t    //
                    +patchMergeKey=type\n\t    // +patchStrategy=merge\n\t    // +listType=map\n\t
                    \   // +listMapKey=type\n\t    Conditions []metav1.Condition `json:\"conditions,omitempty\"
                    patchStrategy:\"merge\" patchMergeKey:\"type\" protobuf:\"bytes,1,rep,name=conditions\"`\n\n\n\t
                    \   // other fields\n\t}"
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: |-
                        type of condition in CamelCase or in foo.example.com/CamelCase.
                        ---
                        Many .condition.type values are consistent across resources like Available, but because arbitrary conditions can be
                        useful (see .node.status.conditions), the ability to deconflict is important.
                        The regex it matches is (dns1123SubdomainFmt/)?(qualifiedNameFmt)
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
              databaseInitSQL:
                description: DatabaseInitSQL state of custom database initialization
                  in the cluster
                type: string
              databaseRevision:
                description: Identifies the databases that have been installed into
                  PostgreSQL.
                type: string
              instances:
                description: Current state of PostgreSQL instances.
                items:
                  properties:
                    desiredPGDataVolume:
                      additionalProperties:
                        type: string
                      description: Desired Size of the pgData volume
                      type: object
                    name:
                      type: string
                    readyReplicas:
                      description: Total number of ready pods.
                      format: int32
                      type: integer
                    replicas:
                      description: Total number of pods.
                      format: int32
                      type: integer
                    updatedReplicas:
                      description: Total number of pods that have the desired specification.
                      format: int32
                      type: integer
                  required:
                  - name
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - name
                x-kubernetes-list-type: map
              monitoring:
                description: Current state of PostgreSQL cluster monitoring tool configuration
                properties:
                  exporterConfiguration:
                    type: string
                type: object
              observedGeneration:
                description: observedGeneration represents the .metadata.generation
                  on which the status was based.
                format: int64
                minimum: 0
                type: integer
              patroni:
                properties:
                  switchover:
                    description: Tracks the execution of the switchover requests.
                    type: string
                  switchoverTimeline:
                    description: Tracks the current timeline during switchovers
                    format: int64
                    type: integer
                  systemIdentifier:
                    description: The PostgreSQL system identifier reported by Patroni.
                    type: string
                type: object
              pgbackrest:
                description: Status information for pgBackRest
                properties:
                  manualBackup:
                    description: Status information for manual backups
                    properties:
                      active:
                        description: The number of actively running manual backup
                          Pods.
                        format: int32
                        type: integer
                      completionTime:
                        description: |-
                          Represents the time the manual backup Job was determined by the Job controller
                          to be completed.  This field is only set if the backup completed successfully.
                          Additionally, it is represented in RFC3339 form and is in UTC.
                        format: date-time
                        type: string
                      failed:
                        description: The number of Pods for the manual backup Job
                          that reached the "Failed" phase.
                        format: int32
                        type: integer
                      finished:
                        description: |-
                          Specifies whether or not the Job is finished executing (does not indicate success or
                          failure).
                        type: boolean
                      id:
                        description: |-
                          A unique identifier for the manual backup as provided using the "pgbackrest-backup"
                          annotation when initiating a backup.
                        type: string
                      startTime:
                        description: |-
                          Represents the time the manual backup Job was acknowledged by the Job controller.
                          It is represented in RFC3339 form and is in UTC.
                        format: date-time
                        type: string
                      succeeded:
                        description: The number of Pods for the manual backup Job
                          that reached the "Succeeded" phase.
                        format: int32
                        type: integer
                    required:
                    - finished
                    - id
                    type: object
                  repoHost:
                    description: Status information for the pgBackRest dedicated repository
                      host
                    properties:
                      apiVersion:
                        description: |-
                          APIVersion defines the versioned schema of this representation of an object.
                          Servers should convert recognized schemas to the latest internal value, and
                          may reject unrecognized values.
                          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
                        type: string
                      kind:
                        description: |-
                          Kind is a string value representing the REST resource this object represents.
                          Servers may infer this from the endpoint the client submits requests to.
                          Cannot be updated.
                          In CamelCase.
                          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
                        type: string
                      ready:
                        description: Whether or not the pgBackRest repository host
                          is ready for use
                        type: boolean
                    type: object
                  repos:
                    description: Status information for pgBackRest repositories
                    items:
                      description: RepoStatus the status of a pgBackRest repository
                      properties:
                        bound:
                          description: Whether or not the pgBackRest repository PersistentVolumeClaim
                            is bound to a volume
                          type: boolean
                        name:
                          description: The name of the pgBackRest repository
                          type: string
                        replicaCreateBackupComplete:
                          description: |-
                            ReplicaCreateBackupReady indicates whether a backup exists in the repository as needed
                            to bootstrap replicas.
                          type: boolean
                        repoOptionsHash:
                          description: |-
                            A hash of the required fields in the spec for defining an Azure, GCS or S3 repository,
                            Utilized to detect changes to these fields and then execute pgBackRest stanza-create
                            commands accordingly.
                          type: string
                        stanzaCreated:
                          description: Specifies whether or not a stanza has been
                            successfully created for the repository
                          type: boolean
                        volume:
                          description: The name of the volume the containing the pgBackRest
                            repository
                          type: string
                      required:
                      - name
                      type: object
                    type: array
                    x-kubernetes-list-map-keys:
                    - name
                    x-kubernetes-list-type: map
                  restore:
                    description: Status information for in-place restores
                    properties:
                      active:
                        description: The number of actively running manual backup
                          Pods.
                        format: int32
                        type: integer
                      completionTime:
                        description: |-
                          Represents the time the manual backup Job was determined by the Job controller
                          to be completed.  This field is only set if the backup completed successfully.
                          Additionally, it is represented in RFC3339 form and is in UTC.
                        format: date-time
                        type: string
                      failed:
                        description: The number of Pods for the manual backup Job
                          that reached the "Failed" phase.
                        format: int32
                        type: integer
                      finished:
                        description: |-
                          Specifies whether or not the Job is finished executing (does not indicate success or
                          failure).
                        type: boolean
                      id:
                        description: |-
                          A unique identifier for the manual backup as provided using the "pgbackrest-backup"
                          annotation when initiating a backup.
                        type: string
                      startTime:
                        description: |-
                          Represents the time the manual backup Job was acknowledged by the Job controller.
                          It is represented in RFC3339 form and is in UTC.
                        format: date-time
                        type: string
                      succeeded:
                        description: The number of Pods for the manual backup Job
                          that reached the "Succeeded" phase.
                        format: int32
                        type: integer
                    required:
                    - finished
                    - id
                    type: object
                  scheduledBackups:
                    description: Status information for scheduled backups
                    items:
                      properties:
                        active:
                          description: The number of actively running manual backup
                            Pods.
                          format: int32
                          type: integer
                        completionTime:
                          description: |-
                            Represents the time the manual backup Job was determined by the Job controller
                            to be completed.  This field is only set if the backup completed successfully.
                            Additionally, it is represented in RFC3339 form and is in UTC.
                          format: date-time
                          type: string
                        cronJobName:
                          description: The name of the associated pgBackRest scheduled
                            backup CronJob
                          type: string
                        failed:
                          description: The number of Pods for the manual backup Job
                            that reached the "Failed" phase.
                          format: int32
                          type: integer
                        repo:
                          description: The name of the associated pgBackRest repository
                          type: string
                        startTime:
                          description: |-
                            Represents the time the manual backup Job was acknowledged by the Job controller.
                            It is represented in RFC3339 form and is in UTC.
                          format: date-time
                          type: string
                        succeeded:
                          description: The number of Pods for the manual backup Job
                            that reached the "Succeeded" phase.
                          format: int32
                          type: integer
                        type:
                          description: The pgBackRest backup type for this Job
                          type: string
                      type: object
                    type: array
                type: object
              postgresVersion:
                description: |-
                  Stores the current PostgreSQL major version following a successful
                  major PostgreSQL upgrade.
                type: integer
              proxy:
                description: Current state of the PostgreSQL proxy.
                properties:
                  pgBouncer:
                    properties:
                      postgresRevision:
                        description: |-
                          Identifies the revision of PgBouncer assets that have been installed into
                          PostgreSQL.
                        type: string
                      readyReplicas:
                        description: Total number of ready pods.
                        format: int32
                        type: integer
                      replicas:
                        description: Total number of non-terminated pods.
                        format: int32
                        type: integer
                    type: object
                type: object
              registrationRequired:
                properties:
                  pgoVersion:
                    type: string
                type: object
              startupInstance:
                description: |-
                  The instance that should be started first when bootstrapping and/or starting a
                  PostgresCluster.
                type: string
              startupInstanceSet:
                description: The instance set associated with the startupInstance
                type: string
              tokenRequired:
                type: string
              userInterface:
                description: Current state of the PostgreSQL user interface.
                properties:
                  pgAdmin:
                    description: The state of the pgAdmin user interface.
                    properties:
                      usersRevision:
                        description: Hash that indicates which users have been installed
                          into pgAdmin.
                        type: string
                    type: object
                type: object
              usersRevision:
                description: Identifies the users that have been installed into PostgreSQL.
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
